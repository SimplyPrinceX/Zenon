{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/simpl/Desktop/nova-main/zeon/src/app/live-sports/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst API_BASE = \"https://streami.su/api\";\r\n\r\nconst SPORT_ORDER = [\r\n  \"basketball\", \"football\", \"american-football\", \"hockey\", \"baseball\", \"motor-sports\", \"fight\", \"tennis\", \"rugby\", \"golf\"\r\n];\r\n\r\nexport default function LiveSportsPage() {\r\n  const [sports, setSports] = useState<any[]>([]);\r\n  const [selectedSport, setSelectedSport] = useState<string | null>(null);\r\n  const [matchesBySport, setMatchesBySport] = useState<Record<string, any[]>>({});\r\n  const [popularLive, setPopularLive] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedMatch, setSelectedMatch] = useState<any | null>(null);\r\n  const [streams, setStreams] = useState<any[]>([]);\r\n  const [streamLoading, setStreamLoading] = useState(false);\r\n  const [showPlayer, setShowPlayer] = useState(false);\r\n\r\n  // Fetch all sports\r\n  useEffect(() => {\r\n    fetch(`${API_BASE}/sports`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setSports(data || []);\r\n        if (!selectedSport && data && data.length > 0) setSelectedSport(data[0].id);\r\n      });\r\n  }, []);\r\n\r\n  // Fetch matches for all sports in SPORT_ORDER\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    Promise.all(\r\n      SPORT_ORDER.map(sport =>\r\n        fetch(`${API_BASE}/matches/${sport}`)\r\n          .then(res => res.json())\r\n          .then(data => [sport, data || []])\r\n      )\r\n    ).then(results => {\r\n      const bySport: Record<string, any[]> = {};\r\n      results.forEach(([sport, matches]) => {\r\n        bySport[sport] = matches;\r\n      });\r\n      setMatchesBySport(bySport);\r\n      // Popular Live: flatten all matches and filter for live\r\n      const allMatches = Object.values(bySport).flat();\r\n      setPopularLive(allMatches.filter((m: any) => m.status && m.status.toLowerCase() === \"live\"));\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  // Open stream modal\r\n  const openMatch = async (match: any) => {\r\n    setSelectedMatch(match);\r\n    setStreamLoading(true);\r\n    setShowPlayer(true);\r\n    if (match.sources && match.sources.length > 0) {\r\n      const source = match.sources[0];\r\n      const res = await fetch(`${API_BASE}/stream/${source.source}/${source.id}`);\r\n      const data = await res.json();\r\n      setStreams(data || []);\r\n    } else {\r\n      setStreams([]);\r\n    }\r\n    setStreamLoading(false);\r\n  };\r\n\r\n  // Helper to get sport icon\r\n  const getSportIcon = (sport: any) => {\r\n    if (sport.icon) return <img src={sport.icon} alt={sport.name} className=\"w-8 h-8 mb-2\" />;\r\n    return <span className=\"w-8 h-8 mb-2\" />;\r\n  };\r\n\r\n  // Helper to get event/team image\r\n  const getEventImage = (match: any) => {\r\n    if (match.image) return <img src={match.image} alt={match.title || match.event} className=\"w-full h-28 object-cover rounded-t-xl\" />;\r\n    return <div className=\"w-full h-28 bg-gradient-to-br from-gray-700 to-gray-900 flex items-center justify-center text-white/40 text-2xl font-bold\">Streamed</div>;\r\n  };\r\n\r\n  // Helper to get team logos (if available)\r\n  const getTeamLogos = (match: any) => {\r\n    if (match.teams && Array.isArray(match.teams)) {\r\n      return (\r\n        <div className=\"flex items-center justify-center gap-2 mb-2\">\r\n          {match.teams.map((team: any, idx: number) =>\r\n            team.logo ? (\r\n              <img key={idx} src={team.logo} alt={team.name} className=\"w-10 h-10 object-contain rounded-full bg-white\" />\r\n            ) : (\r\n              <div key={idx} className=\"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center text-xs text-gray-500\">{team.name?.[0]}</div>\r\n            )\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  // Card for a match\r\n  const MatchCard = ({ match }: { match: any }) => (\r\n    <div\r\n      className=\"bg-[#18181b] rounded-xl shadow-md overflow-hidden cursor-pointer border border-[#232329] relative min-w-[220px] max-w-[260px] flex flex-col\"\r\n      onClick={() => openMatch(match)}\r\n    >\r\n      {getEventImage(match)}\r\n      <div className=\"absolute top-2 left-2\">\r\n        {match.status && match.status.toLowerCase() === \"live\" && (\r\n          <span className=\"bg-red-600 text-white text-xs font-bold px-2 py-1 rounded\">LIVE</span>\r\n        )}\r\n        {match.time && match.status && match.status.toLowerCase() !== \"live\" && (\r\n          <span className=\"bg-black/80 text-white text-xs font-bold px-2 py-1 rounded\">{match.time}</span>\r\n        )}\r\n        {match.date && !match.status && (\r\n          <span className=\"bg-black/80 text-white text-xs font-bold px-2 py-1 rounded\">{match.date}</span>\r\n        )}\r\n      </div>\r\n      <div className=\"absolute top-2 right-2\">\r\n        <button className=\"bg-yellow-400/90 hover:bg-yellow-500 text-white rounded-full p-1 shadow\">\r\n          <svg width=\"20\" height=\"20\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M10 15l-5.878 3.09 1.122-6.545L.488 6.91l6.561-.955L10 0l2.951 5.955 6.561.955-4.756 4.635 1.122 6.545z\"/></svg>\r\n        </button>\r\n      </div>\r\n      <div className=\"p-3 flex-1 flex flex-col justify-between\">\r\n        {getTeamLogos(match)}\r\n        <div className=\"font-bold text-base text-white truncate mb-1\" title={match.title || match.event}>{match.title || match.event}</div>\r\n        <div className=\"text-gray-400 text-xs mb-1\">{match.competition || match.league || ''}</div>\r\n        <div className=\"text-gray-500 text-xs\">{match.sport || ''}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Carousel for a section\r\n  const SectionCarousel = ({ title, matches }: { title: string, matches: any[] }) => (\r\n    <div className=\"mb-8\">\r\n      <h2 className=\"text-2xl font-bold mb-3 text-white drop-shadow-lg\">{title}</h2>\r\n      <div className=\"flex gap-5 overflow-x-auto pb-2 scrollbar-thin scrollbar-thumb-cyan-400/30 scrollbar-track-transparent\">\r\n        {matches.map((match) => <MatchCard key={match.id} match={match} />)}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n      <h1 className=\"text-3xl font-extrabold text-white mb-8 drop-shadow-lg\">Live Sports</h1>\r\n      {/* Sports Selector */}\r\n      <div className=\"flex gap-4 overflow-x-auto py-4 px-1 mb-8 scrollbar-thin scrollbar-thumb-cyan-400/30 scrollbar-track-transparent\">\r\n        {SPORT_ORDER.map((sportId) => {\r\n          const sport = sports.find((s) => s.id === sportId);\r\n          if (!sport) return null;\r\n          return (\r\n            <button\r\n              key={sport.id}\r\n              className={`bg-[#232329] rounded-xl min-w-[140px] h-20 flex flex-col items-center justify-center px-4 py-2 text-white font-bold text-lg shadow-md transition-all duration-200 ${selectedSport === sport.id ? 'ring-2 ring-cyan-400' : ''}`}\r\n              onClick={() => setSelectedSport(sport.id)}\r\n            >\r\n              {getSportIcon(sport)}\r\n              <span>{sport.name}</span>\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n      {/* Popular Live Section */}\r\n      {popularLive.length > 0 && <SectionCarousel title=\"Popular Live\" matches={popularLive} />}\r\n      {/* Sectioned Carousels by Sport */}\r\n      {SPORT_ORDER.map((sportId) => {\r\n        const sport = sports.find((s) => s.id === sportId);\r\n        if (!sport || !matchesBySport[sportId] || matchesBySport[sportId].length === 0) return null;\r\n        return <SectionCarousel key={sportId} title={`Popular ${sport.name}`} matches={matchesBySport[sportId]} />;\r\n      })}\r\n      {/* Stream Player Modal */}\r\n      {showPlayer && selectedMatch && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm\">\r\n          <div className=\"bg-[#232329] max-w-2xl w-full rounded-2xl shadow-2xl p-6 sm:p-8 relative flex flex-col items-center justify-center mx-2\">\r\n            <button\r\n              className=\"absolute top-3 right-3 p-2 rounded-full bg-white/30 hover:bg-red-400/60 transition\"\r\n              onClick={() => setShowPlayer(false)}\r\n              aria-label=\"Close\"\r\n            >\r\n              <span className=\"text-xl\">âœ•</span>\r\n            </button>\r\n            <h2 className=\"text-xl font-bold mb-4 text-center\">{selectedMatch.title || selectedMatch.event}</h2>\r\n            {streamLoading ? (\r\n              <div className=\"text-white text-lg\">Loading stream...</div>\r\n            ) : streams.length === 0 ? (\r\n              <div className=\"text-white/60\">No streams available.</div>\r\n            ) : (\r\n              <iframe\r\n                src={streams[0].url}\r\n                allowFullScreen\r\n                className=\"w-full aspect-video rounded-xl border border-white/20 shadow-lg\"\r\n                style={{ minHeight: 320 }}\r\n                title=\"Live Stream\"\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}